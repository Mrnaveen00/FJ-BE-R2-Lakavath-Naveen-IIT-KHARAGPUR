<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personal Finance Tracker</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Navigation Bar (Hidden initially until user logs in) -->
    <nav id="navbar" class="navbar" style="display: none;">
        <div class="nav-container">
            <h2 class="nav-brand">Finance Tracker</h2>
            <div class="nav-links">
                <a href="#" onclick="showSection('dashboard')" class="nav-link active">Dashboard</a>
                <a href="#" onclick="showSection('transactions')" class="nav-link">Transactions</a>
                <a href="#" onclick="showSection('budgets')" class="nav-link">Budgets</a>
                <a href="#" onclick="showSection('reports')" class="nav-link">Reports</a>
                <button onclick="handleLogout()" class="btn-logout">Logout</button>
            </div>
        </div>
    </nav>

    <!-- Authentication Section -->
    <div id="auth-section" class="auth-container">
        <div class="auth-box">
            <div class="auth-header">
                <h1>Personal Finance Tracker</h1>
                <p>Manage your finances with ease</p>
            </div>
            
            <!-- Login Form -->
            <div id="login-form" class="auth-form-container">
                <h2>Login to Your Account</h2>
                <form id="login-form-element">
                    <div class="form-group">
                        <label for="login-email">Email Address</label>
                        <input 
                            type="email" 
                            id="login-email" 
                            placeholder="Enter your email" 
                            required
                            autocomplete="email">
                    </div>
                    
                    <div class="form-group">
                        <label for="login-password">Password</label>
                        <input 
                            type="password" 
                            id="login-password" 
                            placeholder="Enter your password" 
                            required
                            autocomplete="current-password">
                    </div>
                    
                    <button type="submit" class="btn-primary">Login</button>
                </form>
                
                <div class="auth-divider">
                    <span>OR</span>
                </div>
                
                <button onclick="loginWithGoogle()" class="btn-google">
                    <svg width="18" height="18" viewBox="0 0 18 18">
                        <path fill="#4285F4" d="M17.64 9.2c0-.637-.057-1.251-.164-1.84H9v3.481h4.844c-.209 1.125-.843 2.078-1.796 2.717v2.258h2.908c1.702-1.567 2.684-3.874 2.684-6.615z"/>
                        <path fill="#34A853" d="M9 18c2.43 0 4.467-.806 5.956-2.184l-2.908-2.258c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H.957v2.332C2.438 15.983 5.482 18 9 18z"/>
                        <path fill="#FBBC05" d="M3.964 10.707c-.18-.54-.282-1.117-.282-1.707s.102-1.167.282-1.707V4.961H.957C.347 6.175 0 7.55 0 9s.348 2.825.957 4.039l3.007-2.332z"/>
                        <path fill="#EA4335" d="M9 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.463.891 11.426 0 9 0 5.482 0 2.438 2.017.957 4.961L3.964 7.293C4.672 5.163 6.656 3.58 9 3.58z"/>
                    </svg>
                    Continue with Google
                </button>
                
                <p class="auth-toggle">
                    Don't have an account? 
                    <a href="#" id="show-register">Register here</a>
                </p>
            </div>

            <!-- Register Form (Hidden by default) -->
            <div id="register-form" class="auth-form-container" style="display: none;">
                <h2>Create New Account</h2>
                <form id="register-form-element">
                    <div class="form-group">
                        <label for="register-name">Full Name</label>
                        <input 
                            type="text" 
                            id="register-name" 
                            placeholder="Enter your full name" 
                            required
                            autocomplete="name">
                    </div>
                    
                    <div class="form-group">
                        <label for="register-email">Email Address</label>
                        <input 
                            type="email" 
                            id="register-email" 
                            placeholder="Enter your email" 
                            required
                            autocomplete="email">
                    </div>
                    
                    <div class="form-group">
                        <label for="register-password">Password</label>
                        <input 
                            type="password" 
                            id="register-password" 
                            placeholder="Create a password" 
                            required
                            autocomplete="new-password"
                            minlength="6">
                        <small>Password must be at least 6 characters</small>
                    </div>
                    
                    <button type="submit" class="btn-primary">Register</button>
                </form>
                
                <div class="auth-divider">
                    <span>OR</span>
                </div>
                
                <button onclick="loginWithGoogle()" class="btn-google">
                    <svg width="18" height="18" viewBox="0 0 18 18">
                        <path fill="#4285F4" d="M17.64 9.2c0-.637-.057-1.251-.164-1.84H9v3.481h4.844c-.209 1.125-.843 2.078-1.796 2.717v2.258h2.908c1.702-1.567 2.684-3.874 2.684-6.615z"/>
                        <path fill="#34A853" d="M9 18c2.43 0 4.467-.806 5.956-2.184l-2.908-2.258c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H.957v2.332C2.438 15.983 5.482 18 9 18z"/>
                        <path fill="#FBBC05" d="M3.964 10.707c-.18-.54-.282-1.117-.282-1.707s.102-1.167.282-1.707V4.961H.957C.347 6.175 0 7.55 0 9s.348 2.825.957 4.039l3.007-2.332z"/>
                        <path fill="#EA4335" d="M9 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.463.891 11.426 0 9 0 5.482 0 2.438 2.017.957 4.961L3.964 7.293C4.672 5.163 6.656 3.58 9 3.58z"/>
                    </svg>
                    Continue with Google
                </button>
                
                <p class="auth-toggle">
                    Already have an account? 
                    <a href="#" id="show-login">Login here</a>
                </p>
            </div>
        </div>
    </div>

    <!-- Main Application Section (Hidden until user logs in) -->
    <div id="app-section" style="display: none;">
        
        <!-- Dashboard Section -->
        <div id="dashboard-section" class="section active">
            <div class="container">
                <div class="section-header">
                    <h1>Dashboard</h1>
                    <p class="welcome-message">Welcome back, <span id="user-name">User</span>!</p>
                </div>
                
                <div id="dashboard-content">
                    <!-- Stats Grid -->
                    <div class="stats-grid">
                        <div class="stat-card income">
                            <div class="stat-icon">ðŸ’°</div>
                            <div class="stat-info">
                                <h3>Total Income</h3>
                                <p id="total-income" class="stat-value">$0.00</p>
                            </div>
                        </div>
                        <div class="stat-card expense">
                            <div class="stat-icon">ðŸ’¸</div>
                            <div class="stat-info">
                                <h3>Total Expenses</h3>
                                <p id="total-expenses" class="stat-value">$0.00</p>
                            </div>
                        </div>
                        <div class="stat-card balance">
                            <div class="stat-icon">ðŸ“Š</div>
                            <div class="stat-info">
                                <h3>Balance</h3>
                                <p id="balance" class="stat-value">$0.00</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Financial Overview Chart -->
                    <div class="chart-card">
                        <h3>Financial Overview</h3>
                        <canvas id="financeChart"></canvas>
                    </div>
                    
                    <!-- Recent Transactions -->
                    <div class="recent-transactions">
                        <div class="section-title">
                            <h3>Recent Transactions</h3>
                            <a href="#" onclick="showSection('transactions')" class="view-all-link">View All â†’</a>
                        </div>
                        <div id="recent-transactions-list" class="transactions-container">
                            <p class="empty-state">No transactions yet. Add your first transaction!</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Transactions Section -->
        <div id="transactions-section" class="section" style="display: none;">
            <div class="container">
                <div class="section-header">
                    <h1>Transactions</h1>
                    <button onclick="showAddTransactionForm()" class="btn-primary">+ Add Transaction</button>
                </div>
                
                <!-- Add Transaction Form (Hidden by default) -->
                <div id="transaction-form-container" class="form-card" style="display: none;">
                    <h3>Add New Transaction</h3>
                    <form id="transaction-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="trans-type">Type *</label>
                                <select id="trans-type" required>
                                    <option value="">Select Type</option>
                                    <option value="income">Income</option>
                                    <option value="expense">Expense</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="trans-category">Category *</label>
                                <select id="trans-category" required>
                                    <option value="">Select Category</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="trans-amount">Amount *</label>
                                <input type="number" id="trans-amount" placeholder="0.00" step="0.01" min="0.01" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="trans-date">Date *</label>
                                <input type="date" id="trans-date" required>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="trans-description">Description (Optional)</label>
                            <textarea id="trans-description" placeholder="Add notes about this transaction..." rows="3"></textarea>
                        </div>
                        
                        <div class="form-buttons">
                            <button type="submit" class="btn-primary">Add Transaction</button>
                            <button type="button" onclick="hideAddTransactionForm()" class="btn-secondary">Cancel</button>
                        </div>
                    </form>
                </div>
                
                <!-- Transaction Filters -->
                <div id="transaction-filters" class="filters-card" style="display: none;">
                    <div class="filters-row">
                        <div class="filter-group">
                            <label for="filter-type">Type</label>
                            <select id="filter-type" onchange="loadTransactions()">
                                <option value="">All Types</option>
                                <option value="income">Income</option>
                                <option value="expense">Expense</option>
                            </select>
                        </div>
                        
                        <div class="filter-group">
                            <label for="filter-category">Category</label>
                            <select id="filter-category" onchange="loadTransactions()">
                                <option value="">All Categories</option>
                            </select>
                        </div>
                        
                        <button onclick="clearFilters()" class="btn-secondary-small">Clear Filters</button>
                    </div>
                </div>
                
                <!-- Transactions List -->
                <div class="transactions-card">
                    <h3>Transaction History</h3>
                    <div id="transactions-list" class="transactions-container">
                        <p class="empty-state">No transactions yet. Add your first transaction!</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Budgets Section (Placeholder - Hidden) -->
        <div id="budgets-section" class="section" style="display: none;">
            <div class="container">
                <div class="section-header">
                    <h1>Budget Management</h1>
                    <button onclick="showAddBudgetForm()" class="btn-primary">+ Set Budget</button>
                </div>
                
                <!-- Add Budget Form (Hidden by default) -->
                <div id="budget-form-container" class="form-card" style="display: none;">
                    <h3>Set New Budget</h3>
                    <form id="budget-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="budget-category">Category *</label>
                                <select id="budget-category" required>
                                    <option value="">Select Category</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="budget-amount">Budget Amount *</label>
                                <input type="number" id="budget-amount" placeholder="0.00" step="0.01" min="0.01" required>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="budget-period">Period *</label>
                                <select id="budget-period" required onchange="updateBudgetDates()">
                                    <option value="">Select Period</option>
                                    <option value="monthly">Monthly</option>
                                    <option value="yearly">Yearly</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="budget-start-date">Start Date *</label>
                                <input type="date" id="budget-start-date" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="budget-end-date">End Date *</label>
                                <input type="date" id="budget-end-date" required>
                            </div>
                        </div>
                        
                        <div class="form-buttons">
                            <button type="submit" class="btn-primary">Set Budget</button>
                            <button type="button" onclick="hideAddBudgetForm()" class="btn-secondary">Cancel</button>
                        </div>
                    </form>
                </div>
                
                <!-- Budgets List -->
                <div class="budgets-container">
                    <div id="budgets-list">
                        <p class="empty-state">No budgets set yet. Create your first budget!</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Reports Section (Placeholder - Hidden) -->
        <div id="reports-section" class="section" style="display: none;">
            <div class="container">
                <div class="section-header">
                    <h1>Financial Reports</h1>
                    <p>Analyze your income and expenses over time</p>
                </div>
                
                <!-- Report Controls -->
                <div class="report-controls">
                    <div class="form-group">
                        <label for="report-year">Year</label>
                        <select id="report-year" onchange="loadMonthlyReport()">
                        </select>
                    </div>
                </div>
                
                <!-- Monthly Report Chart -->
                <div class="chart-card">
                    <h3>Monthly Income vs Expenses</h3>
                    <canvas id="monthlyReportChart"></canvas>
                </div>
                
                <!-- Summary Cards -->
                <div class="stats-grid">
                    <div class="stat-card income">
                        <div class="stat-icon">ðŸ’°</div>
                        <div class="stat-info">
                            <h3>Total Income</h3>
                            <p id="report-total-income" class="stat-value">$0.00</p>
                        </div>
                    </div>
                    <div class="stat-card expense">
                        <div class="stat-icon">ðŸ’¸</div>
                        <div class="stat-info">
                            <h3>Total Expenses</h3>
                            <p id="report-total-expenses" class="stat-value">$0.00</p>
                        </div>
                    </div>
                    <div class="stat-card balance">
                        <div class="stat-icon">ðŸ“Š</div>
                        <div class="stat-info">
                            <h3>Net Balance</h3>
                            <p id="report-balance" class="stat-value">$0.00</p>
                        </div>
                    </div>
                </div>
                
                <!-- Monthly Breakdown Table -->
                <div class="report-table-card">
                    <h3>Monthly Breakdown</h3>
                    <div id="monthly-breakdown-table">
                        <p class="empty-state">Select a year to view monthly breakdown</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast"></div>

    <!-- JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="config.js"></script>
    <script src="auth.js"></script>
    <script src="dashboard.js"></script>
    <script src="transactions.js"></script>
    <script src="reports.js"></script>
    <script src="budgets.js"></script>
</body>
</html>
